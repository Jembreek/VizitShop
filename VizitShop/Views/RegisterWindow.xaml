<Window x:Class="VizitShop.RegisterWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="VizitShop - Регистрация"
        Height="700" Width="450"
        WindowStartupLocation="CenterScreen"
        Background="Transparent"
        WindowStyle="None"
        AllowsTransparency="True"
        FontFamily="Segoe UI"
        MouseLeftButtonDown="Window_MouseLeftButtonDown">

    <Window.Resources>
        <Color x:Key="PrimaryColor">#7C4DFF</Color>
        <Color x:Key="PrimaryDarkColor">#6A40D8</Color>
        <Color x:Key="TextPrimaryColor">#212121</Color>
        <Color x:Key="TextSecondaryColor">#757575</Color>
        <Color x:Key="CardBackgroundColor">#FFFFFF</Color>
        <Color x:Key="ErrorColor">#F44336</Color>

        <SolidColorBrush x:Key="PrimaryBrush" Color="{StaticResource PrimaryColor}"/>
        <SolidColorBrush x:Key="PrimaryDarkBrush" Color="{StaticResource PrimaryDarkColor}"/>
        <SolidColorBrush x:Key="TextPrimaryBrush" Color="{StaticResource TextPrimaryColor}"/>
        <SolidColorBrush x:Key="TextSecondaryBrush" Color="{StaticResource TextSecondaryColor}"/>
        <SolidColorBrush x:Key="CardBackground" Color="{StaticResource CardBackgroundColor}"/>
        <SolidColorBrush x:Key="ErrorBrush" Color="{StaticResource ErrorColor}"/>

        <Style TargetType="TextBox">
            <Setter Property="Background" Value="{StaticResource CardBackground}"/>
            <Setter Property="BorderBrush" Value="#E0E0E0"/>
            <Setter Property="BorderThickness" Value="0 0 0 2"/>
            <Setter Property="Padding" Value="10 8"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
                </Trigger>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="BorderBrush" Value="{StaticResource PrimaryDarkBrush}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style TargetType="PasswordBox">
            <Setter Property="Background" Value="{StaticResource CardBackground}"/>
            <Setter Property="BorderBrush" Value="#E0E0E0"/>
            <Setter Property="BorderThickness" Value="0 0 0 2"/>
            <Setter Property="Padding" Value="10 8"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
                </Trigger>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="BorderBrush" Value="{StaticResource PrimaryDarkBrush}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="PrimaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource PrimaryBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12 10"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" CornerRadius="8" Background="{TemplateBinding Background}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource PrimaryDarkBrush}"/>
                                <Setter TargetName="border" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.2" Color="{StaticResource PrimaryColor}"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#5D36C2"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SecondaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource PrimaryBrush}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12 10"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" CornerRadius="8" Background="{TemplateBinding Background}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#F1E8FF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="CloseButtonStyle" TargetType="Button">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid>
                            <Ellipse x:Name="BackgroundCircle" Width="24" Height="24" Fill="Transparent" Opacity="0"/>
                            <Path x:Name="CloseIcon" Data="M10,10 L20,20 M20,10 L10,20" Stroke="#888" StrokeThickness="2" StrokeStartLineCap="Round" StrokeEndLineCap="Round"/>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="BackgroundCircle" Property="Fill" Value="#20FF5252"/>
                                <Setter TargetName="BackgroundCircle" Property="Opacity" Value="1"/>
                                <Setter TargetName="CloseIcon" Property="Stroke" Value="#FF5252"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <DropShadowEffect x:Key="ShadowEffect" BlurRadius="20" ShadowDepth="0" Opacity="0.2" Color="#000"/>
    </Window.Resources>

    <Border CornerRadius="10" Background="{StaticResource CardBackground}" BorderThickness="1" BorderBrush="#E0E0E0" Effect="{StaticResource ShadowEffect}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="58"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Border Background="{StaticResource PrimaryBrush}" CornerRadius="10 10 0 0" Grid.Row="0">
                <DockPanel>
                    <Image Source="/Images/logo.png" Width="120" Height="120" Margin="5 -30 5 0" DockPanel.Dock="Left"/>
                    <Button Style="{StaticResource CloseButtonStyle}" Click="CloseButton_Click" Width="32" Height="32" DockPanel.Dock="Right" Margin="0,0,-260,0"/>
                </DockPanel>
            </Border>

            <ScrollViewer Grid.Row="1" Margin="30,20,30,30" VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <TextBlock Text="Регистрация" FontSize="24" FontWeight="SemiBold" Foreground="{StaticResource TextPrimaryBrush}" HorizontalAlignment="Center" Margin="0,0,0,30"/>

                    <TextBlock Text="ФИО" FontWeight="SemiBold" Margin="0,0,0,5" Foreground="{StaticResource TextSecondaryBrush}"/>
                    <TextBox x:Name="fullNameTextBox"/>

                    <TextBlock Text="Логин" FontWeight="SemiBold" Margin="0,15,0,5" Foreground="{StaticResource TextSecondaryBrush}"/>
                    <TextBox x:Name="usernameTextBox"/>

                    <TextBlock Text="Пароль" FontWeight="SemiBold" Margin="0,15,0,5" Foreground="{StaticResource TextSecondaryBrush}"/>
                    <PasswordBox x:Name="passwordBox"/>

                    <TextBlock Text="Подтверждение пароля" FontWeight="SemiBold" Margin="0,15,0,5" Foreground="{StaticResource TextSecondaryBrush}"/>
                    <PasswordBox x:Name="confirmPasswordBox"/>

                    <TextBlock Text="Роль" FontWeight="SemiBold" Margin="0,15,0,5" Foreground="{StaticResource TextSecondaryBrush}"/>
                    <ComboBox x:Name="roleComboBox" Margin="0,0,0,20">
                        <ComboBoxItem Content="Пользователь"/>
                        <ComboBoxItem Content="Администратор"/>
                    </ComboBox>

                    <Button Content="Зарегистрироваться" Style="{StaticResource PrimaryButtonStyle}" Click="RegisterButton_Click" Margin="0,25,0,15"/>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <TextBlock Text="Уже есть аккаунт?" Foreground="{StaticResource TextSecondaryBrush}" VerticalAlignment="Center"/>
                        <Button Content="Войти" Style="{StaticResource SecondaryButtonStyle}" Margin="5,0,0,0" Click="LoginButton_Click"/>
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>
        </Grid>
    </Border>
</Window>